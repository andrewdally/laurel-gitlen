$('<%=j render "gallery" %>').appendTo("body");

centerSlides();

$('#gallery-slides').cycle({
	prev: $('#prev'),
	next: $('#next'),
	timeout: 0,
	startingSlide: <%=j params[:slide] %>,
	before: function(){
		setTimeout(function(currSlideElement, nextSlideElement, options, forwardFlag){
			centerSlides;
		}, 100);
	}
});

$('.close').click(function(){
	$("#gallery").fadeOut(function(){
		$(this).remove();
	});
});